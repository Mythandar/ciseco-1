<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0315)http://webcache.googleusercontent.com/search?q=cache%3Ahttp%3A%2F%2Fopenmicros.org%2Findex.php%2Farticles%2F84-xrf-basics%2F224-firmware-release-notes&oq=cache%3Ahttp%3A%2F%2Fopenmicros.org%2Findex.php%2Farticles%2F84-xrf-basics%2F224-firmware-release-notes&aqs=chrome..69i57j69i58.1251j0j4&sourceid=chrome&ie=UTF-8 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<base href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes">--><base href="."><style type="text/css">body { margin-left:0;margin-right:0;margin-top:0; }#google-cache-hdr {background:#f5f5f5 !important;font:13px arial,sans-serif !important;text-align:left !important;color:#202020 !important;border:0 !important;margin:0 !important;border-bottom:1px solid #cecece !important;line-height:16px !important ;padding:16px 28px 24px 28px !important;}#google-cache-hdr * {display:inline !important;font:inherit !important;text-align:inherit !important;color:inherit !important;line-height:inherit !important;background:none !important;border:0 !important;margin:0 !important;padding:0 !important;letter-spacing:0 !important;}#google-cache-hdr a {text-decoration:none !important;color:#1a0dab !important;}#google-cache-hdr a:hover { text-decoration:underline !important; }#google-cache-hdr a:visited { color:#609 !important; }#google-cache-hdr div { display:block !important;margin-top:4px !important; }#google-cache-hdr b {font-weight:bold !important;display:inline-block !important;direction:ltr !important;}</style><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head><body><div id="google-cache-hdr" dir="ltr"><div>This is Google's cache of <a href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes" dir="ltr">http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes</a>. It is a snapshot of the page as it appeared on Aug 25, 2016 14:28:56 GMT. </div><div>The <a href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes" dir="ltr">current page</a> could have changed in the meantime. <a href="http://support.google.com/websearch/bin/answer.py?hl=en&amp;p=cached&amp;answer=1687222">Learn more</a></div><div></div><div><span style="display:inline-block !important;margin-top:8px !important;margin-right:104px !important;white-space:nowrap !important;"><span style="margin-right:28px !important;"><span style="font-weight:bold !important;">Full version</span></span><span style="margin-right:28px !important;"><a href="http://webcache.googleusercontent.com/search?q=cache:http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes&amp;num=1&amp;strip=1&amp;vwsrc=0">Text-only version</a></span><span style="margin-right:28px !important;"><a href="http://webcache.googleusercontent.com/search?q=cache:http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes&amp;num=1&amp;strip=0&amp;vwsrc=1">View source</a></span></span><span style="display:inline-block !important;margin-top:8px !important;color:#717171 !important;">Tip: To quickly find your search term on this page, press <b>Ctrl+F</b> or <b>⌘-F</b> (Mac) and use the find bar.</span></div></div><div style="position:relative;">




  <!--<base href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes">--><base href=".">
  
  <meta name="robots" content="index, follow">
  <meta name="keywords" content="">
  <meta name="rights" content="">
  <meta name="language" content="en-GB">
  <meta name="title" content="Firmware release notes">
  <meta name="author" content="John Crouchley">
  <meta name="generator" content="Joomla! 1.6 - Open Source Content Management">
  <title>Firmware release notes</title>
  <script src="./Firmware release notes_files/core.js" type="text/javascript"></script>
  <script src="./Firmware release notes_files/mootools-core.js" type="text/javascript"></script>
  <script src="./Firmware release notes_files/caption.js" type="text/javascript"></script>
  <script src="./Firmware release notes_files/mootools-more.js" type="text/javascript"></script>

<link rel="stylesheet" href="./Firmware release notes_files/system.css" type="text/css">
<link rel="stylesheet" href="./Firmware release notes_files/general.css" type="text/css">
<link rel="stylesheet" href="./Firmware release notes_files/template.css" type="text/css">
<link rel="stylesheet" href="./Firmware release notes_files/grey.css" type="text/css">
<!--[if IE 6]>
<link rel="stylesheet" href="/templates/a4joomla-thirty-three/css/ie6.css" type="text/css" />
<script src="/templates/a4joomla-thirty-three/js/suckerfish.js" type="text/javascript"></script>
<style type="text/css">
img, div, a, input { behavior: url(/templates/a4joomla-thirty-three/iepngfix.htc) }
</style>
<script src="/templates/a4joomla-thirty-three/js/iepngfix_tilebg.js" type="text/javascript"></script>
<![endif]-->
<!--[if lte IE 7]>
<link rel="stylesheet" href="/templates/a4joomla-thirty-three/css/ie67.css" type="text/css" />
<![endif]-->
<script type="text/javascript" src="./Firmware release notes_files/mod_stat.php"></script>
<style type="text/css">
 #header {
    height: 80px;
 }
 #allwrap {
    margin-top:0px;
 }
 #logo {
    width:440px;
    height:80px;
 }
 #logo h2 {
    font-size:52px;
	margin-top:0px;
 }
 #logo h3 {
	margin-top:-10px;
 }
 #banner {
    height: 80px;
 }
 #banner div.moduletable {
	margin-top:10px;
 }
 #headerright {
    width:530px;
    height:80px;
	       background: none;   
     } 
 #search {
   width:170px;
   height:32px;
 }
 
</style>
<!-- <script src="/templates/a4joomla-thirty-three/js/equalize.js" type="text/javascript"></script> -->





<div id="allwrap" class="gainlayout" style="width:1030px;">

<div id="headerwrap" class="gainlayout">
  <div id="header" class="gainlayout">   
      <div id="logo" class="gainlayout">
         		    <a href="http://openmicros.org/"><img src="./Firmware release notes_files/openmicroslogo.png" border="0" alt=""></a>
          
      </div>
	  <div id="headerright" class="gainlayout">
                <div class="clr"></div>
      </div>
      <div class="clr"></div>
  </div>	  
  <div class="clr"></div>
</div>

<div id="topmenuwrap" class="gainlayout">
           <div id="topmenu" class="gainlayout">
           		<div class="moduletable">
					<h3>Top</h3>
					
<ul class="menusfh">
<li id="item-464"><a href="http://openmicros.org/">Home</a></li><li id="item-540"><a href="http://openmicros.org/index.php/documentation">documentation</a></li><li id="item-486"><a href="http://openmicros.org/index.php/component/kunena/?Itemid=0">FORUM</a></li><li id="item-484" class="current active"><a href="http://openmicros.org/index.php/articles">Articles by list</a></li><li id="item-490"><a href="http://openmicros.org/index.php/search">forum search</a></li><li id="item-541"><a href="http://wirelessthings.net/" target="_blank">WirelessThings Shop</a></li></ul>		</div>
	
           <div class="clr"></div>
         </div> 
            <div id="search" class="gainlayout">
          		<div class="moduletable">
					<h3>Search</h3>
					<form action="http://openmicros.org/index.php/articles" method="post">
	<div class="search">
		<label for="mod-search-searchword">Search...</label><input name="searchword" id="mod-search-searchword" maxlength="20" class="inputbox" type="text" size="20" value="Search..." onblur="if (this.value==&#39;&#39;) this.value=&#39;Search...&#39;;" onfocus="if (this.value==&#39;Search...&#39;) this.value=&#39;&#39;;" data-cip-id="mod-search-searchword">	<input type="hidden" name="task" value="search">
	<input type="hidden" name="option" value="com_search">
	<input type="hidden" name="Itemid" value="484">
	</div>
</form>
		</div>
	 
		<div class="clr"></div>  
        </div>
    <div class="clr"></div>
</div> 

<div id="wrap" class="gainlayout">

  	  <div id="pathway" class="gainlayout">
        
<div class="breadcrumbs">
<span class="showHere">You are here: </span><a href="http://openmicros.org/" class="pathway">Home</a> <img src="./Firmware release notes_files/arrow.png" alt=""> <a href="http://openmicros.org/index.php/articles" class="pathway">Articles by list</a> <img src="./Firmware release notes_files/arrow.png" alt=""> <a href="http://openmicros.org/index.php/articles/84-xrf-basics" class="pathway">Radio basics (XRF, URF, ERF &amp; SRF)</a> <img src="./Firmware release notes_files/arrow.png" alt=""> <span>Firmware release notes</span></div>
<p style="display:none"><a href="http://alevelwriter.com/write_my_philosophy_education_paper.html">write my philosophy education paper</a></p>
<p style="display:none"><a href="http://alevelwriter.com/write_my_philosophy_paper.html">write my philosophy paper</a></p>
<p style="display:none"><a href="http://alevelwriter.com/write_my_psychology_paper.html">write my psychology paper</a></p>

      <div class="clr"></div>
	  </div>
   
    <div id="cbody" class="gainlayout">
    <div id="content60" style="width:988px;">    

	    
      <div id="content" class="gainlayout">
	  
      <div class="item-page">
		<h2>
								<a href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes">
						Firmware release notes</a>
						</h2>


		<ul class="actions">
		<li class="print-icon"><a href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes?tmpl=component&amp;format=pdf" onclick="window.open(this.href,&#39;win2&#39;,&#39;status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no&#39;); return false;" title="PDF" rel="nofollow"><img src="./Firmware release notes_files/pdf_button.png" alt="PDF"></a></li>										<li class="print-icon">
						<a href="http://openmicros.org/index.php/articles/84-xrf-basics/224-firmware-release-notes?tmpl=component&amp;print=1&amp;page=" title="Print" onclick="window.open(this.href,&#39;win2&#39;,&#39;status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no&#39;); return false;" rel="nofollow"><img src="./Firmware release notes_files/printButton.png" alt="Print"></a>				</li>
				
								<li class="email-icon">
						<a href="http://openmicros.org/index.php/component/mailto/?tmpl=component&amp;template=a4joomla-thirty-three&amp;link=4d07c9b6d138c7692a6d5b69f8ad47f2e6d9812c" title="Email" onclick="window.open(this.href,&#39;win2&#39;,&#39;width=400,height=350,menubar=yes,resizable=yes&#39;); return false;"><img src="./Firmware release notes_files/emailButton.png" alt="Email"></a>				</li>
												</ul>

	
	

 <dl class="article-info">
 <dt class="article-info-term">Details</dt>
		<dd class="category-name">
										Category: <a href="http://openmicros.org/index.php/articles/84-xrf-basics">Radio basics (XRF, URF, ERF &amp; SRF)</a>						</dd>
		<dd class="modified">
		Last Updated on Thursday, 21 April 2016 08:17		</dd>
	
 </dl>

	
	<p><strong><span style="font-size:16px;">XRF Firmware release notes</span></strong></p><p style="font-size: 12px;">Firmware downloads can be found in Github,<a href="https://github.com/CisecoPlc/XRF-Firmware-downloads" style="font-size: 12px;">&nbsp;https://github.com/CisecoPlc/XRF-Firmware-downloads</a></p><div><p style="font-size: 12px;">Beta firmware (under development or test) downloads can be found in Github,<a href="https://github.com/CisecoPlc/BetaFirmware" style="font-size: 12px;">&nbsp;https://github.com/CisecoPlc/BetaFirmware</a></p><p style="font-size: 12px;">For information on firmware update procerude please see this page:&nbsp;<a href="http://openmicros.org/index.php/articles/84-xrf-basics/111" title="Firmware updating - HOW TO">Firmware updating - HOW TO</a></p><p style="font-size: 12px;">&nbsp;</p></div><p><span style="font-size: 12px; line-height: 1.5;">Please note that not all firmware mentioned below is released for general use; some are in testing and some are internal. If you wish to test specific firmware variants not currently available for download then please email </span><em style="font-size: 12px; line-height: 1.5;">cisecodev </em><span style="font-size: 12px; line-height: 1.5;">at</span><em style="font-size: 12px; line-height: 1.5;"> ciseco.co.uk</em><span style="font-size: 12px; line-height: 1.5;">, all other support queries should go via the forums.</span></p><p>&nbsp;</p><p><strong style="font-size: 12.16px; line-height: 1.5;">LLAP V84 (ONE_BUTTONV2 only)</strong></p><ul><li><strong style="font-size: 12.16px; line-height: 1.5;">Correct error that caused config saves to be ignored.</strong></li></ul><p><strong>LLAP V83&nbsp;</strong><strong style="font-size: 12.16px; line-height: 1.5;">(ONE_BUTTONV2 only)</strong></p><ul><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>New firmware (ONE_BUTTONV2) – BETA release</strong></span></span><ul><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Has a single button input XRF pin 19 (P2_3), expects an external pullup resistor (1M recommended).</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Supports Cyclic sleep, reporting the battery status and the button state once per cycle, this is used as a “I’m still here” message (default every 6 hours once a CYCLE command has been issued.</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Supports the following special commands</strong></span></span><ul><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>aXXDEBnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set the debounce time in mS, default 100</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>aXXSTSnnnnnn&nbsp;&nbsp;&nbsp;&nbsp; mS, sleep period whilst debouncing, default 10</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>aXXMSGxxxxxx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sets the message to be sent followed by ON (switch is closed) or OFF (switch is open), defaults to BUTTON</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>aXXCSNmmmmmm&nbsp; sets the text of a new state message – default “STATE”, this message is sent immediately after the BATT message at the specified interval. E.g.:<br>
aXXAWAKE----<br>
aXXBATT3.21-<br>
aXXSTATEOFF-<br>
&lt;delay&gt;<br>
aXXSLEEPING-</strong></span></span></li></ul></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>This is a low power device designed for use on e.g. a windows or door where the switch may be open or closed for extended periods.</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Initial tests suggest that it uses less than 0.6uA whilst sleeping (contact open) and 4uA when sleeping (contact closed) (precise measurements yet to be made).</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Main differences between this and ONE_BUTTON are:</strong></span></span><ul><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Uses interrupt sleeping in either polarity – main current loss is through pullup resistor when contact is closed.</strong></span></span></li><li><span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;"><strong>Uses XRF pin 19 instead of XRF pin 9 (this was to enable the point above)</strong></span></span></li></ul></li></ul></li></ul><p><strong style="font-size: 12.16px; line-height: 1.5;">Serial V96, USB V60, LLAP V82</strong></p><ul><li>Add a time out to the receive code – if nothing has been received for a while (default 10.5 minutes) then reset radio receive. In a busy network some devices are seen to have stopped receiving, this resets it.</li><li>ATZT hhhhhh&nbsp;&nbsp; will set the receive timeout value (this is in hex so 10.5 mins is 630000mS decimal and 99CF0 hex<strong>.</strong></li></ul><p><strong style="font-size: 12.16px; line-height: 1.5;">LLAP V81</strong></p><ul><li>One Button only<ul><li>New command<ul><li>aXXTRISTATEn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n=0 normal internal pullup, n=1 input is tristated. aXXTRISTATE1 expects an external pullup from XRF pin 9 (P1_4) to V+ (tested working up to 2M ohm), this is useful to extend battery life (internal pullup is approx. 27K ohm).</li><li>aXXCSNmmmmmm&nbsp; sets the text of a new state message – default “STATE”, this message is sent immediately after the BATT message at the specified interval. E.g.:<br>
aXXAWAKE----<br>
aXXBATT3.21-<br>
aXXSTATEOFF-<br>
&lt;delay&gt;<br>
aXXSLEEPING-</li></ul></li></ul></li></ul><p><strong>Serial V95, USB V59, LLAP V80</strong></p><ul><li>Introduced new data rate (7) as the default data rate, this has a reduced deviation (127KHz – 0x63 to 105.5KHz - 0x-61) but otherwise is identical to data rate 1. This new data rate was introduced to ensure that we stayed within the ETSI requirements and is compatable with devices using data rate 1.</li><li>Data rate 7 (ATDR7) is now the factory default for all builds.</li></ul><p><strong style="font-size: 12.16px; line-height: 1.5;">LLAP V78</strong></p><ul><li><strong style="font-size: 12.16px; line-height: 1.5;">Current consumption improvements for cyclic sleep devices</strong></li><li>Added BATTLOW at a fixed voltage to all LLAP devices<ul><li>aXXBTLOW---- will return the current limit</li><li>aXXBTLOW2.1- will set it to the specified voltage – in this case 2.1V</li><li>When the battery is read (e.g. every 10 messages for cyclic devices) then the device will compare the result to the BTLOW limit. if the battery is below the limit then instead of the BATT message the device will<ul><li>send BATTLOW, sleep for 1 hour and repeat the message and sleep again and so on.</li><li>This will continue until the device is reset.</li><li>The default limit is 1.9 volts,&nbsp;</li></ul></li></ul></li></ul><p><strong>Serial V0.94, USB V0.56, LLAP0.77</strong></p><ul><li>ATID changes will now take place immediately, previously it took one message before the new setting was used.</li><li style="font-size: 12.1599998474121px;">Corrected ATEA command - where the random nonce had unfortunate results.</li></ul><p><strong style="font-size: 12.1599998474121px; line-height: 1.5;">LLAP V0.75</strong></p><ul><li>LLAP aXXINTVL command - will not set any invalid data and return will be aXXINTVL000S when set to zero.</li><li>All radios<ul><li>ATID changes only took effect on the second message<ul><li>Corrected</li></ul></li><li>Corrected ATEA command - where the random nonce had unfortunate results.</li></ul></li><li>Sleep code has been refactored to allow some devices to sleep more efficiently.</li></ul><p><strong>Serial 0.91a and USB 0.55a</strong></p><ul><li>make sure that the remote prog reset pin is set to input for UARTSRF (was set as output HIGH)</li></ul><p><strong>LLAP V0.73 (ONE_BUTTON only)</strong></p><ul><li>ONE_BUTTON<ul><li>Corrected defect where the device locked if the switch is closed and a battery message is due</li><li>Reversed polarity of the message so that switch closed = ON and switch open = OFF</li></ul></li></ul><p><strong>LLAP V0.72 </strong></p><ul><li>New firmware (ONE_BUTTON) – BETA release<ul><li>Has a single button input XRF pin 9 (P1_4), this matches BUTTONA for the CCB V1.9 (Blue board)</li><li>Supports Cyclic sleep, reporting the battery status once per cycle, this is used as a “I’m still here” message</li><li>Supports the following special commands<ul><li>aXXDEBnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set the debounce time in mS, default 100</li><li>aXXSTSnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set the settling sleep time in mS – the device will poll the input at this interval until the input has settled</li><li>aXXWOSnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set the polling time, used when the switch is closed waiting for it to open</li><li>aXXMSGxxxxxx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sets the message to be sent followed by ON (switch is closed) or OFF (switch is open), defaults to BUTTON</li></ul></li><li>This is a low power device designed for use on e.g. a windows or door where the switch may be open or closed for extended periods.</li><li>BETA release - use with care there may be issues - please report if found</li><li>Typical use - set the device name, interval for the battery messages and place into cyclic sleep.</li></ul></li></ul><p style="margin-left: 80px;">a--CHDEVIDYY</p><p style="margin-left: 80px;">a--REBOOT---</p><p style="margin-left: 80px;">aYYINTVL001H</p><p style="margin-left: 80px;">aYYCYCLE----</p><p><strong>LLAP V0.71 (DALLAS)</strong></p><ul><li>Fix timing routine (broken in V0.67) so that the one wire protocol works</li></ul><p><strong>Serial V0.90, USB V0.55</strong></p><ul><li>Robust OTAMP.<ul><li>Use ATRP3 instead of ATRP1</li><li>Other end (slave) must be V0.90 or greater</li><li>Does not work if multiple active nodes have the same remote ID – they will all try and take part in responding</li><li>Only only works for one node at a time - i.e. cannot separately OTAMP several devices on the same frequency</li></ul></li><li>UARTSRF-115200, XINORF and RFu328 all default to 115200 baud<ul><li>Firmware updates will still need to be done at 9600, XCM will alter the baud rate automatically</li></ul></li><li>New AT command “ATLH” LLAP host mode<ul><li>0 = off (Normal)</li><li>1 = on</li><li>Requires applying ATAC</li><li>Forces 12 character packet length</li><li>Serial received messages beginning with a?? are encrypted and sent on a special CONFIGME PANID</li><li>Radio received messages on the special CONFIGME PANID are decrypted</li></ul></li></ul><p><strong>LLAP V0.69</strong></p><ul><li>Updated BETA firmware for XRFV2 boards<ul><li>COUNTV2 – updated inputs are now<ul><li>P1_4 Count A</li><li>P1_5 Count B</li></ul></li><li>TACHO<ul><li>Not yet supported on XRFV2</li></ul></li><li>ULTRASONIC<ul><li>Not yet supported on XRFV2</li></ul></li></ul></li><li>New LLAP command to return RSSI from the LLAP device<ul><li>aXXRSSI-----</li><li>response aXXRSSI-nnn- where nnn is the negative dBm RSSI of the RSSI enquiry message when received</li></ul></li></ul><p><strong>Serial V0.86, USB V0.51</strong></p><ul><li>Added RSSI reading to output in ATZD (packet dump) mode</li></ul><p><strong>LLAP V0.68</strong></p><ul><li>New firmware for XRFV2 boards (and SRF)<ul><li>BUTTONV3 – buttons are now<ul><li>P1_3 (pin 13) Hall effect</li><li>P1_4 (pin 9)Button A</li><li>P1_5 (pin 8)Button B</li><li>Please note that these pins are no longer compatible with the green Coin Cell Board</li></ul></li><li>GENERICV2<ul><li>INPC changed from P2_2 to P1_3 (pin 13)</li><li>OUTD and ANAD no longer exist</li></ul></li><li>PWMV2<ul><li>PWMA and PWMB moved from P1_6/7 to P1_3/4 (pin 13/9)</li></ul></li></ul></li></ul><ul><li>All supported firmware (that can) now supports power amplifier (ARF) pin 15 is PAN/EN and pin 18 is LNA/EN</li><li>All other LLAP firmware is now XRFV2 compatible</li></ul><p><strong>USB V0.50</strong></p><ul><li>Modified the device name (returned with the version number) from URF to USB</li></ul><p><strong>Serial V0.85 (UART-SRF only)</strong></p><ul><li>P2_3 is high during remote programming (i.e. the device is programming the attached micro), otherwise it is low</li></ul><p><strong>LLAP V0.66</strong></p><ul><li>LLAP – Introduce new command<ul><li>aXXSLEEPM### - set/return sleep mode<ul><li>&nbsp; AP_SLEEP_INTERRUPT = 8</li><li>&nbsp; AP_SLEEP_CYCLIC = 16</li><li>&nbsp; AP_SLEEP_ONESHOT = 32</li></ul></li></ul></li></ul><p><strong>LLAP V0.65</strong></p><ul><li>Correct several defects introduced in the new functionality in LLAP V0.64</li><li>aXXCHDEVID—will return the device ID-- it is no longer possible to restore the device ID back to -- once it has changed without resetting the device (e.g. aXXLLAPRESET).</li><li>aXXCHREMID—will return the remote device ID-- it is no longer possible to restore the remote device ID back to -- once it has changed without resetting the device (e.g. bu using aXXLLAPRESET).</li><li>New command aXXLLAPRESET will reset all values that can be changed via LLAP to the default values. The values are not saved to the config, aXXSAVE----- or aXXREBOOT--- will do that.</li></ul><p><strong>LLAP V0.64</strong></p><ul><li>All LLAP commands that set config can now also return the current value<br>
e.g. aXXRETRIES-- will return the retries whilst aXXRETRIES6- will set it as normal.</li></ul><p><strong>Serial 0.84 (RFu-328 only)</strong></p><ul><li>Corrected defects in sleep mode (ATSM3)</li><li>Modification to sleep delay<ul><li>On wakening if the sleep pin is held high or unconnected (internally pulled up) then the device will resume sleep after 2 to 3mS (i.e. the 328 has 2mS to set the sleep pin low to prevent sleeping).</li></ul></li><li>Sleep power is measured to be around 0.6 uA with the 328 and the SRF in full sleep, RFu pin 7 connected to RFu pin 19</li></ul><p><strong>Serial 0.83 (RFu-328 only)</strong></p><ul><li>Added a new sleep mode (ATSM3)</li><li>This mode sleeps when the sleep pin P1_4 (connected to 328 D4) is high.<ul><li>The device will wake when the sleep pin is low, <strong>or</strong> after a timed duration has elapsed.</li><li>When in SM3 the device will assert P1_6 (RFu-328 pin 7, D11) when awake and set it low when sleeping.</li><li>On wakening if the sleep pin is held high or unconnected (internally pulled up) then the device will resume sleep after 1mS (e.g. the 328 has 1mS to set the sleep pin low to prevent sleeping).</li><li>Once P1_6 is asserted then the device is ready to receive data, there is no need to wait further for it to start up.</li></ul></li><li>The duration is specified by a new command ATSD, units are mS and the range is 32bit (max approx. 49 days)<ul><li>e.g. ATSD5265C00 is one day (hex 5265C00 is decimal 86400000)</li><li>ATSD36EE80 is one hour</li><li>ATSD493E0 is five minutes</li></ul></li><li>This sleep mode can be used to wake the 328 after a timed interval by connecting RFu-328 pin 7 to pin 19 or 20 (INT0 or INT1).<ul><li>Using this technique means that a RFu-328 can sleep for a timed period consuming about 0.4uA (0.2uA for the SRF and 0.2uA for the 328), instead of using the AVR328 watchdog (for timing) which uses around 7uA.</li></ul></li></ul><p><strong>LLAP 0.62 (Generic only)</strong></p><ul><li>Generic – add support for pulsed outputs<ul><li>aXXPLSA1----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pulse output A high</li><li>aXXPLSB0----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pulse output B low</li><li>aXXPLEN1000-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set length of pulse to 1 second</li><li>aXXPLEN30000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set length of pulse to 30 seconds (max 65.535 secs)</li></ul></li></ul><p><strong>LLAP 0.60</strong></p><ul><li>Fixed regression issue introduced in LLAP 0.58, whereby the ID used by cyclic sleeping was always --</li></ul><p><strong>LLAP 0.59</strong></p><ul><li>Fixed defect in the beta version of LLAP count software whereby the 16bit unsigned counter was treated as a signed 16bit value when the value was returned, thus a value of 65535 was being returned as 00001.</li></ul><p><br>
<strong>Serial 0.82, USB 0.49 LLAP 0.58</strong></p><ul><li>Serial communications<ul><li>Parity support - even / odd parity support (8 bit data + 1 bit parity, 9 bit characters), requires ATAC before it takes effect.<ul><li>ATSP0 – no parity (8 bit data, no parity bit, default)</li><li>ATSP1 – odd parity</li><li>ATSP2 – even parity</li></ul></li><li>Stop bits support - 1 or 2 stop bits), requires ATAC before it takes effect.<ul><li>ATSS0 – 1 stop bit (default)</li><li>ATSS1 – 2 stop bits</li></ul></li></ul></li><li>Default for ATRC set to 3, default for ATRI set to --</li><li>Disable (make read only) ATRP for XinoRF and RFu-328</li></ul><p>&nbsp;</p><p><strong>Serial 0.81</strong></p><ul><li>Improve behaviour of flow control. This is now applied by ATAC whereas previously it required saving in the config (ATWR) and then the device needed to be reset.</li></ul><p>&nbsp;</p><p><strong>Serial 0.80 (SORSRF only)</strong></p><ul><li>Reverse Serial Rx and Serial Tx Leds</li></ul><p>&nbsp;</p><p><strong>Serial 0.</strong><strong>7</strong><strong>9 (RF328 only)</strong></p><ul><li>Prevent RF328 firmware checking for DTR In – this can cause problems if the RF328 is configured to act as a host in OTAMP (this configuration is not supported)</li></ul><p>&nbsp;</p><p><strong>LLAP 0.57</strong></p><ul><li>Added ability to supress the BATTLOW messages<span style="font-size: 12px;">.</span><ul><li>When the battery is low and the device resets the message is output, outputting the message can cause a further reset and another message - this can continue for a few hours until the battery is fully dead. This change enables the user to supress these messages.<br>
aXXBATTMSG1- disable BATTLOW messages<br>
aXXBATTMSG0- enable BATTLOW messages</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 0.78</strong></p><ul><li>UARTSRF – corrected heartbeat pin (was P2_0 is now P1_7)</li><li>SORSRF – added new variant for Slice of Radio. Based on UARTSRF but no support for power amplifier, P0_7/0_5 is UART Rx Led, P2_2 is UART Tx Led.</li><li>SPI – enable the SPI device to send a remote reset when triggered on port P0_0</li></ul><p>&nbsp;</p><p><strong>Serial 0.</strong><strong>77 (RFu 1.2 only)</strong></p><ul><li>Removed the LNA functionality for compatibility with RFM11B radio modules</li></ul><p>&nbsp;</p><p><strong>Serial 0.76, USB 0.48</strong></p><ul><li><span style="font-size: 12px;">A race condition was found and fixed whereby characters arriving just as an incomplete packet was being put together for transmission could, in special cases, cause the packet to be too long, this would cause the receiver to reject the packet and the data would be lost. This can only occur over the serial port and at high baud rates as the window to generate the problem is very small. For the XINORF the defect in the serial timeout code (USB 0.47) increases the likelihood of this problem occurring.</span></li></ul><p>&nbsp;</p><p><strong style="font-size: 12px; line-height: 1.5;">USB 0.47 (XINORF only)</strong></p><ul><li style="font-size: 12px;"><span style="font-size: 12px; line-height: 1.5;">Correct serial timeout code – this could have caused data to be sent as multiple packets rather than one.</span></li></ul><p style="font-size: 12px;">&nbsp;</p><p style="font-size: 12px;"><strong style="font-size: 12px; line-height: 1.5;">USB 0.46 (XINORF only)</strong></p><ul><li>This only applies to XinoRF board version 1.1. Change initialisation to tristate the USB enable line before activating pulldown on Port2. This is to fix an issue with the SRF not initialising correctly when powered from external voltage and not USB.</li></ul><p>&nbsp;</p><p style="font-size: 12px;"><strong style="font-size: 12px;">Serial 0.75, USB 0.45</strong></p><ul style="font-size: 12px;"><li style="font-size: 12px;"><span style="font-size: 12px; line-height: 1.5;">Corrected ATZZ command - has not worked since Serial 0.71, USB 0.43</span></li></ul><p style="font-size: 12px;">&nbsp;</p><p style="font-size: 12px;"><strong style="font-size: 12px;">Serial 0.74, LLAP 0.56</strong></p><ul style="font-size: 12px;"><li style="font-size: 12px;"><span style="font-size: 12px; line-height: 1.5;">Added addition remote reset pin for RFu328 to allow the RFu board to be used for both SRF and RFM12B</span></li><li style="font-size: 12px;"><span style="font-size: 12px; line-height: 1.5;">LLAP - Ultrasonic - corrected defect where the device hung if no pulse was returned (out of range)</span></li></ul><p style="font-size: 12px;">&nbsp;</p><p><strong>Serial 0.73, USB 0.44, LLAP 0.55</strong></p><ul><li>limit the max DMA size as this ties up the Serial TX buffer until all chars are transmitted<ul><li>New limit is 64 characters Serial and USB</li><li>New limit is 16 characters LLAP</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 0.72 – Rfu328</strong></p><ul><li>P0_1 (SRF pin 17) enable Serial &lt;-&gt; Radio when high. The pin is connected to the ATMega328 Digital 8 – this gives compatibility with XinoRF<ul><li>Remote commands and remote programming will override this pin allowing the radio to program the ATMega328.</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 71, USB 43, LLAP 54</strong></p><ul><li>USB firmware<ul><li>Add TX and RX Leds on P1_5 and P1_6 – these track USB activity</li><li>Add additional USB Enable pin on P2_0</li></ul></li><li>Enable the ATSN (Serial Number) command for all firmwares – previously only available for USB and SPI version.</li><li>Enable the ATMY command for all versions (including LLAP)</li><li>Fixed problem with ATZZ command (dump config) where the reponse overwrote the serial buffer and so some of the data was missing.</li></ul><p>&nbsp;</p><p><strong>Serial 0.69 – RF328 release</strong></p><ul><li>New Serial firmware type RF328 for the new RFu328 board</li></ul><p>&nbsp;</p><p><strong>USB 0.42 XINORF</strong></p><ul><li>Modified the behaviour of Arduino D8 to be reversed – i.e. a low value means USB&lt;-&gt;Serial and a high value means Serial &lt;-&gt;RF</li><li>USB is permanently connected to Serial (as with a normal Arduino)<ul><li>Echoes serial TX data to USB as well as RF if in Serial&lt;-&gt;RF mode</li><li>Echoes USB TX data to Serial if in Serial&lt;-&gt;RF mode</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 0.68 – SPI release</strong></p><ul><li>Streamlined the SPI interrupt routine to help it to work with the Raspberry Pi.</li></ul><p>&nbsp;</p><p><strong>Serial 0.67 – SPI release</strong></p><ul><li>Corrected defect where AT mode did not work properly in when using SPI</li></ul><p>&nbsp;</p><p><strong>URF V0.41 (also USB stick with SRF-U)</strong></p><ul><li>Added an extra pin for the heart beat (P1_7 as well as P1_1)</li><li>Added an extra pin for the USB to serial flag (P0_1 as well as P1_2)</li></ul><p>&nbsp;</p><p><strong>USB/XINORF V0.40</strong></p><ul><li>This release is internal only for the upcoming product the XinoRF.</li></ul><p>&nbsp;</p><p><strong>S</strong><strong>erial V0.66</strong></p><ul><li>Power on reset check – currently XRF pins 19 and 20 (P2_3 and P2_4) shorted<ul><li>Added same test for XRF pins 7,8 (SRF pins 12/13, P1_5 and P1_6) because the SRF does not support P2_4</li><li>Only applies to Serial firmware, does not apply to USB or SPI</li></ul></li></ul><p>&nbsp;</p><p><strong>S</strong><strong>erial V0.65</strong></p><ul><li>Added CC1190 RF power amp functionality to SRF code<ul><li>As before P0_7 (P0_5 for CC1111) – SRF pin 21 is set high when we are transmitting</li><li>Added P2_2 – SRF pin 6 set high when we are receiving. This is set low when sleeping</li></ul></li></ul><p>&nbsp;</p><p><strong>LLAP devices 0.53</strong></p><ul><li>New device Tacho under development<ul><li>Measures time between pulses on:<ul><li>P1_1 XRF pin 14</li></ul></li><li>Measurement is taken on the falling edge of the pulse</li><li>Works up to at least 1KHz; it loses a little accuracy going much faster but still OK. At two pulses per revolution then 1KHz equates to 30,000 rpm!</li><li>Commands (so far):<ul><li>aXXTDIF-----&nbsp;&nbsp;&nbsp;&nbsp; returns last pulse time difference in mS – this is a floating point number</li><li>aXXTAVG-----&nbsp;&nbsp; returns the last five pulse timings averaged in mS – floating point number</li></ul></li><li>Commands to come:<ul><li>aXXTAVGCnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set number of pulses to average (max 10), set to one for no averaging</li><li>aXXPPRnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set pulses per revolution</li><li>aXXDIAnnnnnn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set diameter in mm</li><li>aXXTRPM------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; returns RPM (averaged)</li><li>aXXTKPM-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return speed (km per hour) (averaged)</li><li>aXXTMPS-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return speed (meters per second) (averaged)</li></ul></li></ul></li></ul><p>&nbsp;</p><p><strong>Serial V0.64 – SPI beta release</strong></p><ul><li>Serial firmware now available for XRF, ERF, URF, and SRF devices. The SRF firmware supports SPI</li><li>Arduino library can be found here <a href="https://github.com/CisecoPlc/SRFSPI">https://github.com/CisecoPlc/SRFSPI</a></li><li>SPI interface (SRF), can also be used with XRF<ul><li>Pins used (for SRF, the SPI and IRQ pins match the RFM12B pins):<ul><li>MISO – P1_7 – XRF pin 6, SRF pin 1</li><li>MOSI – P1_6 – XRF pin 7, SRF pin 12</li><li>SCK – P1_5 – XRF pin 8, SRF pin 13</li><li>~CS – P1_4 – XRF pin 9, SRF pin 14</li><li>IRQ – P0_2 – XRF pin 3, SRF pin 2<br>
Output - pulled high when characters are available, otherwise pulled low<br>
Note: on an XRF only this needs an external pull down resistor (say 10K)</li><li>SLEEP – P1_3 – XRF pin 13, SRF pin 11<br>
for the SRF only available as sleep when pin is low</li><li>~SerialEnable – P0_1 – XRF pin 11, SRF pin 17<br>
Unconnected (normal) UART serial is disabled, when pulled low UART serial is enabled (but then IRQ is not to be used)<br>
Serial is to be used for uploading firmware as the bootloader is serial based</li><li>Serial UART Rx – P0_2 - XRF pin 3, SRF pin 2<br>
Note that this is the same pin as used for IRQ</li><li>Serial UART Tx – P0_3 – XRF pin 2, SRF pin 3</li></ul></li><li>Protocol:<ul><li>Tested with 500KHz SPI clock; all looks good</li><li>SPI transfers one character each way for each transfer. As there may not be data available each way we use 0xFF as a pad character – i.e. 0xFF means no data</li><li>0xFE and 0xFF – in order to be able to transfer 0xFF as a ‘real’ character we use a flag byte. The sequence 0xFE, 0xFF indicates a ‘real’ 0xFF. The sequence 0xFE, 0xFE indicates a 0xFE character</li><li>AT commands – these behave as normal across SPI and are also available across the serial UART interface if enabled</li><li>Upgrading firmware can only be performed using the serial UART interface</li></ul></li></ul></li><li>Sleep pin for ERF – We thought it would be useful to allow sleep on ERF devices. As there is no suitable pin brought out then I have set the sleep pin to be P2_1 – the programming pad closest to the connector</li></ul><p>&nbsp;</p><p><strong>LLAP Devices V0.52</strong></p><ul><li>Added T to the sleep options – T = Ticks (mS)<br>
aXXSLEEP100T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sleep for 100 mS<br>
aXXINTVL500T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Send readings every 500mS</li><li>Corrected defect in single shot sleep (aXXSLEEPnnnS) where the time value was also set as the interval for repeated readings (aXXINTVLnnnS). This no longer happens</li><li>Removed restriction of 255 as the maximum time value for the INTVL and SLEEP commands. 1 to 999 is OK for Ticks, Seconds, Minutes and Hours. 1 to 49 is OK for Days</li></ul><p>&nbsp;</p><p><strong>LLAP devices V0.51</strong></p><ul><li>New LLAP firmware llapCount<ul><li>Same inputs as llapButton (XRF pin&nbsp; 14 = A, 15 = B) – don’t forget that on 1.5 XRF boards pin 14 needs a pullup as there isn't one internally</li><li>Counts button presses (or other inputs), default falling edge but can be changed to rising edge with aXXINVERT--- (note pulldown on pin 14 rather than pullup if inverted)</li><li>New LLAP commands:<ul><li>aXXSAVE-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; All LLAP devices – saves current config to flash</li><li>aXXVALn-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns count (16 bit) for button n (A or B)</li><li>aXXRESETn---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Zeros the counter n (A or B)</li></ul></li><li>Supports cyclic sleep, one counter value is output every cycle (A on the first cycle then B on the next cycle and so on)</li></ul></li><li>Refactored sleep code for simplicity, also allows the CC to know how long it has been asleep</li></ul><p>&nbsp;</p><p><strong>Serial V0.63, URF V0.39</strong></p><ul><li>XRF only: implemented RTS serial receive buffer flow control<ul><li>Note: There are conflicting standards here. To avoid confusion this is what we mean here by RTS and CTS:<ul><li>CTS is an input to the XRF when high the XRF will not send characters to the serial port, when low the serial port output is enabled as normal.</li><li>RTS is an output from the XRF to allow an attached processor to control the flow of characters into the XRF serial port. When high the serial input buffer is getting full and the attached processor should stop sending data, when low the serial buffer has enough space and sending data can be resumed.</li></ul></li><li>ATFC values<ul><li>0 = no flow control (default)</li><li>1 = enable CTS (XRF Pin 4) to regulate flow of data from the XRF to the serial port</li><li>2 = enable RTS (XRF Pin 12) to regulate flow of data from the serial port to the XRF</li><li>3 = enable both CTS + RTS</li></ul></li><li>ATFH high threshold value. RTS (XRF pin 12) is set HIGH when there is less than this number of free bytes in the input buffer. Default ATFH 18 (24 decimal)</li><li>ATFL low threshold value. RTS (XRF pin 12) is set LOW when there is at least this number of free bytes in the input buffer. Default ATFL 30 (48 decimal)</li></ul></li><li>At reset, serial firmware on the XRF, ERF and URF will flash the heartbeat led (XRF pin 6, on board led for URF and ERF) three times rapidly. This is to assist in detecting resets.</li></ul><p>&nbsp;</p><p><strong>Serial V0.62, URF V0.38</strong></p><ul><li>New AT command - diagnostic ATZD – reports radio data received, hex &amp; ascii dump of packet. Packet is not processed further. If encryption is employed then the packet is decrypted first<ul><li>ATZD2 report on all radio packets received regardless of PAN ID</li><li>ATZD1 report on radio packets on PAN IDs recognised by the device (0, ID, I2 and reserved)</li><li>ATZD0 (default) no reporting</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial V0.61, URF V0.37</strong></p><ul><li>ERF (XD) release, address remaining issues<ul><li>Power down ERF. Power back up<ul><li>This now works (with USB firmware 0.37)</li><li>The URF now sends the baud rate on every “control line state” message from the host. This message occurs more frequently than every time the port is opened. Note there is no concept in the USB CDC protocol of ‘port open’</li></ul></li><li>ERF status LED<ul><li>Both the on board LED and DTR are now off (set low) when CTS jumper is open. (XD) - ERF firmware -.61)</li></ul></li></ul></li></ul><p>&nbsp;</p><p><strong>XCM XRF Config 1.5</strong></p><ul><li>Fixed mistake in 1.4 where some version numbers were not parsed correctly. Updated in Github and in release folder</li></ul><p>&nbsp;</p><p><strong>URF V0.36</strong></p><ul><li>Remote programming for (XD) update</li><li>Now uses ATRP 2 – instead of ATRP 1 – when specifying remote programming for device (XD). This was done because we needed to disable normal remote programming behaviour when addressing (XD) devices</li><li>(XD) remote programming instructions:<ul><li>ERF for (XD)<ul><li>No change is needed – defaults to 9600, inverted serial and with a default ID (ATMY) of PX. Baud rate will be set by ‘paired’ (via remote ID) URF</li><li>ATIS 0 changes to ‘normal’ serial – this needs applying (ATAC). Firmware update can only be performed in normal serial</li><li>ATIS 1 changes to inverted serial – this needs applying (ATAC)</li><li>CTS must be held low for the serial pins to be enabled</li><li>DTR will pulse as data is sent or received</li><li>To update firmware<ul><li>Connect via inverter</li><li>ATIS 0</li><li>ATWR</li><li>Connect normally to FTDI using a crossover</li><li>Update firmware normally</li><li>ATIS 1</li><li>ATWR</li></ul></li></ul></li><li>URF (no specific (XD)release)<ul><li>Set the remote ID for programming (ATRI) – if with a default ERF for (XD) then set to PX</li><li>ATRP 2 enable remote programming for (XD)</li><li>Forwards change in break state to ERF with the remote ID</li><li>Every time the baud rate is set or changed then forwards a baud rate change to the ERF</li></ul></li></ul></li></ul><p>&nbsp;</p><p><strong>LLAP devices V0.50</strong></p><ul><li>Updated DEVICETYPE for gateway software (8 chars instead of 9)</li><li>Updated LLAP version to 1.1 (to say we are using 8 character device types)</li><li>Instead of continuous STARTED messages if the battery is less than 2.0v now gives BATTLOW messages.</li><li>Waking from sleep:</li></ul><p style="margin-left: 40px;">When a LLAP device is sleeping it can be woken by grounding pin 6, will remain awake whilst pin 6 is grounded and accept commands<br>
When pin 6 is released if device has not had an aXXWAKE----- command then it will resume sleeping (unless the sleep was a one shot e.g. aXXSLEEP005M)<br>
This pin wake does not apply to BUTTONEXT, PWM or PWMRGB firmware as pin 6 is in use for other functions<br>
On BUTTON firmware if the levels are inverted then the action of pin 6 is also inverted</p><p>&nbsp;</p><p><strong>Serial 60, URF 35 and XCM 1.4</strong></p><ul><li>ATVR now returns type (XRF, URF, ERF ...) as well as version. XCM has been updated to cope with this</li></ul><p style="margin-left: 40px;"><strong>YOU MUST UPDATE TO THE NEW XCM BEFORE USING THESE VERSIONS</strong></p><ul><li>When configured for remote programming, URF sends baud rate changed command (using reserved PANID) to the target device. This only works if the target is a (XD) ERF (i.e. no other device listens for the command as yet)</li><li>(XD) ERF changes:<ul><li>Default baud rate is now 9600, will be changed by URF if URF is configured for remote programming and this (XD) ERF is the target</li><li>ATFC (flow control) disabled for (XD) as the pin is now used for disabling the serial interface</li><li>CTS if unconnected or pulled high (also pulled high internally) will disable (tri-state) Txd and Rxd pins. All data received whilst serial is disabled is discarded</li><li>DTR pin is configured as an activity pin, set high on serial character received or on Radio packet received. Set low when serial buffers are empty and radio is not transmitting</li><li>The timeout after which BREAK was cleared has been removed. BREAK will now be asserted on command from the USB and cleared when the USB clears it</li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 59 and URF 34</strong></p><ul><li>Do not enter programming mode when detecting or receiving break (XD)</li><li>Corrected defect with programming mode timeout in URF – allows long programs to be successfully programmed</li><li>Prevent URF from detecting +++ (from either Serial or USB) when in serial mode</li><li>URF: Disable firmware update from USB port, all updates must be done via serial port. This prevents users from apparently bricking URFs when attempting to update firmware. Previous behaviour was to force bootloader mode so the that serial port could then be used; this is no longer needed as the serial port now supports AT mode</li><li>(XD) remote programming instructions:<ul><li>ERF for (XD)<ul><li>No change is needed – defaults to 4800, inverted serial and with a default ID (ATMY) of PX</li><li>ATIS 0 changes to ‘normal’ serial – this needs applying (ATAC). Firmware update can only be performed in normal serial</li><li>ATIS 1 changes to inverted serial – this needs applying (ATAC)</li><li>URF (no specific (XD) release)</li><li>Set the remote ID for programming (ATRI) if with a default ERF for (XD) then set to PX</li><li>ATRP 1 enable remote programming</li></ul></li></ul></li></ul><p>&nbsp;</p><p><strong>Serial 58 and USB 33</strong></p><ul><li>Detection of break (as opposed to DTR) for programming (XD) devices</li><li>Inverted serial for (XD) use</li><li>Does not work for all (XD - Internal Project) devices – need more information on the protocol used.</li></ul><p>&nbsp;</p><p><strong>LLAP devices 0.49</strong></p><ul><li>LLAPRGBEncoder &amp; LLAPPWMRGB- basic structural changes for new functionality<ul><li>Short press is On/Off with rotate (normal mode) as Brightness</li><li>Long press in normal mode switches to setting mode</li><li>Long press in setting mode cycles through Hue, Saturation, Brightness</li><li>Timeout in setting mode returns to normal mode</li><li>Extend timeout for duplicate message rejection</li></ul></li><li>Modified RX processing to delay received packet processing until any TX has finished: there was a condition where we could receive a packet just before transmission occurred, but as we were already in TX mode this caused some problems</li></ul><p>&nbsp;</p><p><strong>LLAP devices 0.48</strong></p><ul><li>ButtonExt - new firmware added<ul><li>Total of 11 buttons (+ pin 3 P1_3 for hall effect)</li><li>Button led changed from pin 17 (P2_1) to pin 11 (P0_1)</li><li>Supports all normal button board commands</li><li>Buttons as follows (on 1.5XRF)</li></ul></li></ul><table border="1" cellpadding="1" cellspacing="1" style="width: 500px;"><tbody><tr><td>&nbsp;</td><td><p>Button</p></td><td>Pin</td><td>Port</td></tr><tr><td>&nbsp;</td><td>A</td><td>14</td><td>P1_1</td></tr><tr><td>&nbsp;</td><td>B</td><td>15</td><td>P0_7 (P0_5 on CC1111)</td></tr><tr><td>&nbsp;</td><td>C</td><td>16</td><td>P2_0</td></tr><tr><td>&nbsp;</td><td>D</td><td>17</td><td>P2_1</td></tr><tr><td>&nbsp;</td><td>E</td><td>18</td><td>P2_2</td></tr><tr><td>&nbsp;</td><td>F</td><td>19</td><td>P2_3</td></tr><tr><td>&nbsp;</td><td>G</td><td>20</td><td>P2_4</td></tr><tr><td>&nbsp;</td><td>H</td><td>9</td><td>P1_4</td></tr><tr><td>&nbsp;</td><td>I</td><td>8</td><td>P1_7</td></tr><tr><td>&nbsp;</td><td>J</td><td>7</td><td>P1_6</td></tr><tr><td>&nbsp;</td><td>K</td><td>6</td><td>P1_5</td></tr></tbody></table><p><br>
&nbsp;</p><p><strong>USB 32, Serial 57 and SerialERF 57</strong></p><ul><li>Released for testing</li><li>Fixed interrupt bugs affecting USB Serial at 115200 baud</li><li>Major refactor of serial code structure to enable future support of Xino 328</li><li>Serial port on URF can now accept AT commands</li></ul><p>&nbsp;</p><p><strong>LLAP devices 0.47</strong></p><ul><li>Bootloader 3d modifications</li><li>Fix encryption issue with retried messages (e.g. STARTED)</li></ul><p>&nbsp;</p><p><strong>Serial 0.56, USB 30, Bootloader 3d</strong></p><ul><li>Minimised IDATA stack usage to prevent lockup when OTA and serially programming microcontrollers</li><li>This bootloader can only be used with firmware released for it, i.e. Serial communication will not work correctly with previous firmware</li><li>Added ATRW – timeout in seconds (0-10 hex) for exiting programming mode, default 5. Used to be to 1</li></ul><p>&nbsp;</p> 
				<ul class="pagenav">
					<li class="pagenav-prev">
						<a href="http://openmicros.org/index.php/articles/84-xrf-basics/196-erf15-bootloader3d-upgrade-a-firmware-upload" rel="next">&lt; Prev</a>
					</li>
					<li class="pagenav-next">
						<a href="http://openmicros.org/index.php/articles/84-xrf-basics/111-firmware-updating-how-to" rel="prev">Next &gt;</a>
					</li>
				</ul>
	</div> 
      </div> 
          
  </div>
      <div class="clr"></div>
  </div>
   
  
<!--end of wrap-->
</div>
    
<!--end of allwrap-->
</div>
<div id="footerwrap" class="gainlayout" style="width:1030px;"> 
  <div id="footer" class="gainlayout">  
         </div>
   
</div>



</div></body></html>